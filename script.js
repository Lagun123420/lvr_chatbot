const chatLog=document.getElementById("chat-log"),userInput=document.getElementById("user-input"),sendButton=document.getElementById("send-button"),buttonIcon=document.getElementById("button-icon"),info=document.querySelector(".info");function handleInput(e){("click"===e.type||"keydown"===e.type&&"Enter"===e.key)&&sendMessage()}async function sendMessage(){const e=userInput.value.trim();if(!/^[A-Za-z0-9 !@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]{1,400}$/.test(e))return void alert("Message should only contain English letters, numbers, and be less than 400 characters.");if(""===e)return;if(switchActives(!1),userInput.value="",appendMessage("user",e),"developer"===e)return void setTimeout((()=>{appendMessage("bot","VLR - Iraclion TG: @VLR_Iraclion"),switchActives(!0)}),1e3);const t={method:"POST",headers:{"content-type":"application/x-www-form-urlencoded","X-RapidAPI-Key":"dec142f56cmsh3b57075872d7cd6p1bac47jsn4ad75d3b9c8b","X-RapidAPI-Host":"robomatic-ai.p.rapidapi.com"},body:new URLSearchParams({in:e,op:"in",cbot:"1",SessionID:"RapidAPI1",cbid:"1",key:"RHMN5hnQ4wTYZBGCF3dfxzypt68rVP",ChatSource:"RapidAPI",duration:"1"})};try{const e=await fetch("https://robomatic-ai.p.rapidapi.com/api",t),n=await e.json();appendMessage("bot",n.out||"Sorry, I can't process your request.")}catch(e){appendMessage("bot","An error occurred while processing your request.")}finally{switchActives(!0)}}function appendMessage(e,t){info.style.display="none";const n=document.createElement("div"),s=document.createElement("div"),a=document.createElement("div"),o=document.createElement("i");a.classList.add("chat-box"),s.classList.add("icon"),n.classList.add(e),n.innerText=t,"user"===e?(o.classList.add("fa-regular","fa-user"),s.setAttribute("id","user-icon")):(o.classList.add("fa-solid","fa-robot"),s.setAttribute("id","bot-icon")),s.appendChild(o),a.appendChild(s),a.appendChild(n),chatLog.appendChild(a),chatLog.scrollTo=chatLog.scrollHeight}function switchActives(e){userInput.disabled=!e,sendButton.disabled=!e,buttonIcon.classList.toggle("fa-solid",e),buttonIcon.classList.toggle("fa-paper-plane",e),buttonIcon.classList.toggle("fas",!e),buttonIcon.classList.toggle("fa-spinner",!e),buttonIcon.classList.toggle("fa-pulse",!e)}sendButton.addEventListener("click",handleInput),userInput.addEventListener("keydown",handleInput);